{% load pwa %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% progressive_web_app_meta %}
    <title>{% block title %}Kumasi Central CoC{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <!-- Other head elements -->
    <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/44.2.0/ckeditor5.css" />


    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>


    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOM4yC+I2W1B1A2ZC0UukS8ik9ASk+6pbq9Z0EG"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <!-- Include SweetAlert CSS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
     <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <!-- Flatpickr localization if needed -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/{{ request.LANGUAGE_CODE }}.js">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">  
<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
</head>
  <body class="bg-gray-50">

  {% include 'partials/_nav.html' %} 

  <div class="container mx-auto mt-6">
    <!-- Display general messages with SweetAlert -->
    {% if messages %}
        {% for message in messages %}
        <script nonce="{{ request.csp_nonce }}">
            Swal.fire({
                icon: "{{ message.tags }}",  // Success, error, info, etc.
                title: "{{ message.level_tag }}",  // The level of the message
                text: "{{ message }}",  // The message itself
                timer: 3000,
                showConfirmButton: true,  // Show the OK button
                confirmButtonText: 'OK',  // Text for the OK button
                confirmButtonColor: '#4CAF50',  // Change to any hex color you want (Green in this case)
            });
        </script>
        {% endfor %}
    {% endif %}
    </div>


    <style>
      :root {
        --animation-duration: 2.5s;
        --perspective: 1200px;
        --background-color: #f8f9fa;
        --spinner-size: 230px;
        --accent-color-1: #2c3e50;
        --accent-color-2: #e74c3c;
        --blur-intensity: 8px;
        --content-fade-duration: 0.8s;
      }
  
      /* Enhanced loader overlay with blur effect */
      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(var(--blur-intensity));
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity var(--content-fade-duration) cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s ease;
        will-change: opacity, transform;
      }
  
      /* Modern spinner container with depth */
      .spinner {
        position: relative;
        width: var(--spinner-size);
        height: var(--spinner-size);
        transform-style: preserve-3d;
        animation: complexRotate var(--animation-duration) infinite ease-in-out;
        filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.1));
      }
  
      /* Multi-axis rotation animation */
      @keyframes complexRotate {
        0% { transform: perspective(var(--perspective)) rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
        100% { transform: perspective(var(--perspective)) rotateX(360deg) rotateY(720deg) rotateZ(360deg); }
      }
  
      /* Gradient overlay effect */
      .spinner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, 
          var(--accent-color-1) 0%, 
          transparent 50%, 
          var(--accent-color-2) 100%);
        opacity: 0.15;
        mix-blend-mode: multiply;
      }
  
      /* Logo image adjustments */
      .spinner img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transform: translateZ(60px);
      }
  
      /* Content fade-in animation */
      #content {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity var(--content-fade-duration) ease-out, transform var(--content-fade-duration) ease-out;
      }
  
      .content-visible {
        opacity: 1 !important;
        transform: translateY(0) !important;
      }
  
      /* Responsive adjustments */
      @media (max-width: 768px) {
        :root {
          --spinner-size: 180px;
          --blur-intensity: 4px;
        }
      }
  
      @media (prefers-reduced-motion: reduce) {
        .spinner {
          animation: none;
          transform: perspective(var(--perspective)) rotateY(15deg);
        }
        #loader {
          transition: opacity 1s ease;
        }
      }
  </style>
  
  <!-- Enhanced Loader -->
  <div id="loader" role="status" aria-label="Loading">
    <div class="spinner">
      <img src="{% static 'images/spinchurch.png' %}" alt="Church Logo" loading="lazy">
    </div>
  </div>

    <!-- Content -->
    <main id="content">
        {% block content %} 

        {% endblock %}
        {% include 'partials/_footer.html' %}
      </main>



    {% comment %} {% include 'partials/_footer.html' %} {% endcomment %}



    {% include 'partials/_quicklinks.html' %}

 

    
 <!-- JavaScript Libraries and Scripts -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('{% url "settings:service-worker" %}?v=1.0.1')
      .then(registration => {
        console.log('ServiceWorker registration successful');

        // Listen for updates to the service worker.
        registration.addEventListener('updatefound', () => {
          const newWorker = registration.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              if (confirm("A new version is available. Reload to update?")) {
                window.location.reload();
              }
            }
          });
        });
      })
      .catch(error => {
        console.log('ServiceWorker registration failed: ', error);
      });
  }
</script>




 <!-- Custom JS Files -->
 <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
 <script>
      AOS.init({
        // Responsive control
        disable: 'mobile', // Disable animations on mobile devices for better performance
        startEvent: 'DOMContentLoaded',
        
        // Animation timing
        offset: 150, // Slightly later trigger point for smoother initiation
        delay: 0, // Base delay (override with data-aos-delay per element)
        duration: 600, // Optimal duration for professional-looking animations
        easing: 'ease-in-out', // Smoother transition curve
        once: true, // Animate only once for cleaner user experience
        mirror: false, // Avoid backward animations for professional flow

        // Advanced configuration
        throttleDelay: 150, // Better scroll performance
        anchorPlacement: 'top-center', // Trigger when element center passes screen bottom
        initClassName: 'aos-prepare', // Useful for pre-animation setup
        animatedClassName: 'aos-executed',

        // Performance optimizations
        useClassNames: false,
        disableMutationObserver: true // Better for static content sites
      });
      
      // Refresh on window resize
      window.addEventListener('resize', function() {
        AOS.refresh();
      });
</script>


<script>
  window.addEventListener('load', function() {
    const loader = document.getElementById('loader');
    const content = document.getElementById('content');
    
    // Smooth loader exit animation
    loader.style.opacity = '0';
    loader.style.transform = 'scale(0.95)';
    
    setTimeout(() => {
      loader.style.display = 'none';
      if(content) {
        content.classList.add('content-visible');
      }
    }, 600);
    
    // Fallback for content visibility
    setTimeout(() => {
      document.body.style.overflow = 'visible';
    }, 1000);
  });

  // Prevent flash of loader on fast connections
  document.body.style.overflow = 'hidden';
  let loaderTimeout = setTimeout(() => {
    document.getElementById('loader').style.opacity = '1';
  }, 100);
</script>


<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
<!-- Optionally include FontAwesome for icons (if not already available) -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<!-- Your custom JavaScript -->
  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Flatpickr Localization -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/default.js"></script>
  <!-- Include Flowbite (SweetAlert is not shown here but Flowbite is) -->
  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
  <script src="{% static 'js/settings.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>
  {% include 'partials/_ministries_detail_model.html' %}
  </body>
</html>
